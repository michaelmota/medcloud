{% extends "base.html" %}
{% load staticfiles %}
{% load sniplates %}
{% block csshead %}
<link href="{% static 'assets/global/plugins/datatables/datatables.min.css' %}" rel="stylesheet" type="text/css" />
<link href="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.css' %}" rel="stylesheet" type="text/css" />
{% endblock %}

{% block content %}
{% load_widgets listview="widgets/list_view.html" %}
{% widget "listview:breadcrumbs" name="Llamadas" %}
<div class="row">
    <div class="col-md-12">
        <div class="portlet light bordered">
            <div class="portlet-title">
                <div class="caption font-dark">
                    <i class="icon-call-in font-dark"></i>
                    <span class="caption-subject bold uppercase"> Record de Llamadas</span>
                </div>
                <div class="actions">
                    <div align="right" class="col-sm-12 col-xs-12">
                        <a href="#buscar" data-toggle="modal" class="btn green"><i class="fa fa-search"></i></a>
                        <a href="#nuevo" data-toggle="modal" class="btn blue">AÃ±adir Nuevo</a>
                    </div>
                </div>
            </div>
            <div class="portlet-body">

                <table class="table table-striped table-bordered table-hover table-checkable order-column" id="sample_1">
                    <thead>
                        <tr>
                            <th> Nombre </th>
                            <th> Telefono/s </th>
                            <th class="hidden-xs"> Referencia </th>
                            <th class="hidden-xs"> Fecha </th>
                            <th> Actions </th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for object in llamada %}
                        <tr class="odd gradeX">
                            <td> <a href="{% url 'llamadas:view' id=object.id %}">{{object.full_name}}</a> </td>
                            <td> {{object.phone1}}</br>{{object.cellphone}}</td>
                            <td class="center hidden-xs"> {{object.referral}} </td>
                            <td class="hidden-xs"><span> {{object.timestamp}} </span></td>
                            <td>
                                <div class="btn-group">
                                    <button class="btn btn-xs green dropdown-toggle" type="button" data-toggle="dropdown" aria-expanded="false"> Accion
                                        <i class="fa fa-angle-down"></i>
                                    </button>
                                    <ul class="dropdown-menu" role="menu">
                                        <li>
                                            <a href="{% url 'llamadas:view' id=object.id %}">
                                                <i class="icon-docs"></i> Ver </a>
                                        </li>
                                        <li>
                                            <a href="{% url 'llamadas:edit' id=object.id %}">
                                                <i class="icon-tag"></i> Editar </a>
                                        </li>
                                        <li class="divider"> </li>
                                        <li>
                                            <a href="#delete" data-toggle="modal">
                                                <i class="icon-flag"></i> Eliminar
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </td>
                        </tr>
                        <div class="modal fade" id="delete" tabindex="-1" role="basic" aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                        <h4 class="modal-title">Eliminar Registor de Llamada</h4>
                                    </div>
                                    <div class="modal-body">
                                        Estas seguro que quieres eliminar esta llamada?
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn dark btn-outline" data-dismiss="modal">Cancelar</button>
                                        <a href="{% url 'llamadas:delete' id=object.id %}" class="btn red">Eliminar</a>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="nuevo" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Eliminar Propiedad - ID: {{instance.id}}</h4>
            </div>
            <div class="modal-body">
                <form method='POST' action='' enctype='multipart/form-data'>{% csrf_token %}
                {{ form.as_p }}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">Cancelar</button>
                <input type='submit' class='btn btn-primary' value='Agregar'/>
                </form>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="buscar" tabindex="-1" role="basic" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Buscar Propiedad</h4>
            </div>
            <div align="center" class="modal-body">
                <form method="GET" action="{% url 'llamadas:list' %}">
                    {{filterform.as_p}}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn dark btn-outline" data-dismiss="modal">Cancelar</button>
                <input type='submit' value='Buscar' class='btn green'>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}
{% block javascript %}
<script src="{% static 'js/scripts/ui-modals.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/layout/scripts/table-datatables-managed.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/scripts/datatable.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/datatables/datatables.min.js' %}" type="text/javascript"></script>
<script src="{% static 'assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js' %}" type="text/javascript"></script>
{% endblock %}